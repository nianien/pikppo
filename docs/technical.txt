ä¸‹é¢æ˜¯ä½ ç¡®è®¤åçš„ v1â€œæ•ˆæœæœ€ç¨³â€çš„å®Œæ•´ã€è¯¦ç»†ã€ç¡®å®šæ€§æŠ€æœ¯æ–¹æ¡ˆï¼ˆå£°çº¿æ± æ¨¡å¼ï¼›Demucs æœ¬åœ°å”¯ä¸€é‡ä¾èµ–ï¼Œå…¶ä½™å…¨åœ¨çº¿ï¼‰ã€‚æˆ‘ä¼šæŒ‰â€œå¯è½åœ°/å¯å®ç°/å¯æ‰©å±•â€å†™æˆå·¥ç¨‹è®¾è®¡æ–‡æ¡£é£æ ¼ï¼šåŒ…å«æ¨¡å—èŒè´£ã€æ•°æ®æµã€äº§ç‰©ç»“æ„ã€å…³é”®å‚æ•°ã€é™çº§ç­–ç•¥ã€QC æŒ‡æ ‡ä¸ v1â†’v1.1 æ¼”è¿›ã€‚

â¸»

1. v1 æ€»ç›®æ ‡ä¸è¾¹ç•Œ

ç›®æ ‡

è¾“å…¥ï¼šå•é›†ä¸­æ–‡çŸ­å‰§è§†é¢‘ï¼ˆä»… mp4ï¼Œæ— å‰§æœ¬ã€æ— è§’è‰²è¡¨ï¼‰
è¾“å‡ºï¼š
	1.	è‹±æ–‡å­—å¹•ï¼ˆSRT + ASSï¼Œå®‰å…¨åŒºå¯æ§ï¼‰
	2.	è‹±æ–‡é…éŸ³ï¼ˆå¤šè§’è‰²å£°çº¿ä¸åŒã€åŒè§’è‰²å£°çº¿ä¸€è‡´ï¼‰
	3.	æˆç‰‡ï¼ˆä¿ç•™æ°›å›´ï¼šBGM/ç¯å¢ƒå£°ï¼›è‹±æ–‡å¯¹ç™½æ¸…æ™°ï¼›ä¸è¿½æ±‚ lip-syncï¼‰
	4.	å¯é‡è·‘èµ„äº§ï¼ˆæ¯æ­¥äº§ç‰©è½ç›˜ã€å¯å±€éƒ¨é‡è·‘ã€å¯ QCï¼‰

å…³é”®ç­–ç•¥ï¼ˆä½ å·²æ‹æ¿ï¼‰
	â€¢	æœ¬åœ°ï¼šDemucs åšäººå£°åˆ†ç¦»ï¼ˆå”¯ä¸€é‡æœ¬åœ°ä¾èµ–ï¼‰
	â€¢	åœ¨çº¿ï¼šASR+diarizationã€ç¿»è¯‘ã€TTS å…¨åœ¨çº¿
	â€¢	å¤šè§’è‰²ï¼šå£°çº¿æ± ï¼ˆvoice poolï¼‰ï¼Œä¸åšåŸæ¼”å‘˜å…‹éš†
	â€¢	æ•ˆæœä¼˜å…ˆï¼šå®å¯æ›´æ…¢ä¸€ç‚¹ï¼Œä¹Ÿè¦ç¨³å®šè´¨é‡

â¸»

2. æ€»ä½“æ¶æ„ä¸æ¨¡å—è¾¹ç•Œ

Pipelineï¼ˆç¡®å®šï¼‰

(1) MediaPrep
    â””â”€ ffmpeg æŠ½éŸ³ -> raw.wav

(2) VocalSeparation  [LOCAL: Demucs]
    â”œâ”€ vocals.wav
    â””â”€ accompaniment.wav

(3) ASR+Diarization  [ONLINE: Google Speech-to-Text]
    â”œâ”€ zh_words.json (word-level speaker tags)
    â””â”€ zh_segments.json (sentence-level segments)

(4) SubtitleBuild
    â”œâ”€ zh.srt
    â””â”€ zh.ass (å¯é€‰)

(5) Translation  [ONLINE: OpenAI]
    â”œâ”€ translation_context.json (äººç‰©/æœ¯è¯­/é£æ ¼/çº¦æŸ)
    â””â”€ en_segments.json (aligned)

(6) SubtitleBuild (EN)
    â”œâ”€ en.srt
    â””â”€ en.ass (å®‰å…¨åŒº + æ ·å¼)

(7) VoicePool + Assignment
    â”œâ”€ voice_pool.json (ç³»ç»Ÿçº§)
    â””â”€ voice_assignment.json (è§†é¢‘çº§å†»ç»“æ˜ å°„)

(8) TTS Synthesis  [ONLINE: Azure Neural TTS]
    â”œâ”€ tts/seg_XXXX.wav (per segment)
    â””â”€ tts_en.wav (æ‹¼æ¥)

(9) DurationAlign (å¯é€‰å¾®è°ƒ)
    â”œâ”€ stretch/trim
    â””â”€ è§¦å‘â€œçŸ­å†™é‡è¯‘â€æœºåˆ¶ï¼ˆä»…è¯¥å¥ï¼‰

(10) Mixing + Mastering
     â”œâ”€ mix.wav
     â””â”€ out.mp4

(11) QC & Report
     â””â”€ qc_report.json


â¸»

3. è¾“å…¥è¾“å‡ºä¸è½ç›˜ç»“æ„ï¼ˆç¡®å®šï¼‰

æ¯ä¸ªè§†é¢‘å•ç‹¬ä¸€ä¸ª run ç›®å½•ï¼ˆä¿è¯å¯é‡è·‘ã€å¯å®¡è®¡ï¼‰ï¼š

runs/<video_id>/
  input/input.mp4

  media/audio_raw.wav

  separation/vocals.wav
  separation/accompaniment.wav

  asr/google_response.json
  asr/zh_words.json
  asr/zh_segments.json

  subtitles/zh.srt

  translate/translation_context.json
  translate/en_segments.json

  subtitles/en.srt
  subtitles/en.ass

  voices/voice_pool.json
  voices/voice_assignment.json

  tts/segments/seg_0001.wav ...
  tts/tts_en.wav

  mix/mix.wav
  output/out.mp4

  qc/qc_report.json
  logs/pipeline.log

video_id æ¨èç”¨ï¼šæ–‡ä»¶åï¼ˆéœ€è¦å”¯ä¸€ï¼‰ã€‚

â¸»

4. å„ç¯èŠ‚è¯¦ç»†è®¾è®¡ï¼ˆç¡®å®šå®ç°æ–¹å¼ï¼‰

4.1 MediaPrepï¼ˆæœ¬åœ°ï¼‰

èŒè´£ï¼šæŠ½å–éŸ³é¢‘ã€ç»Ÿä¸€æ ¼å¼ï¼Œé™ä½åç»­æ¨¡å‹ä¸ç¡®å®šæ€§
å·¥å…·ï¼šffmpeg
å‚æ•°ï¼ˆç¡®å®šï¼‰ï¼š
	â€¢	é‡‡æ ·ç‡ï¼š16k
	â€¢	å£°é“ï¼šmono
	â€¢	ç¼–ç ï¼šPCM s16le

äº§ç‰©ï¼š
	â€¢	media/audio_raw.wav

â¸»

4.2 VocalSeparationï¼ˆæœ¬åœ° Demucsï¼Œå·²é”ï¼‰

èŒè´£ï¼šæŠŠå¯¹ç™½ä» BGM/ç¯å¢ƒé‡Œâ€œæŠ å‡ºæ¥â€ï¼ŒåŒæ—¶å¾—åˆ°å¹²å‡€çš„èƒŒæ™¯è½¨ç”¨äºæ··éŸ³
å·¥å…·ï¼šDemucs htdemucsï¼ˆæ¨è v4 ç³»åˆ—ï¼‰

è¾“å…¥ï¼š
	â€¢	audio_raw.wav

è¾“å‡ºï¼š
	â€¢	separation/vocals.wav
	â€¢	separation/accompaniment.wav

è¯´æ˜ï¼šDemucs ä½œä¸º v1 çš„â€œè´¨é‡è¡¥ä¸â€ï¼Œä¼šæ˜¾è‘—æå‡ ASRã€diarizationã€æ··éŸ³è§‚æ„Ÿã€‚

â¸»

4.3 ASR + Speaker Diarizationï¼ˆåœ¨çº¿ï¼šGoogle STTï¼‰

èŒè´£ï¼šå¯¹ vocals.wav åšä¸­æ–‡è½¬å†™ï¼Œå¹¶è¾“å‡º speaker æ ‡ç­¾ï¼ˆå¤šè§’è‰²åŸºç¡€ï¼‰
è¾“å…¥ï¼šseparation/vocals.wav
è¾“å‡ºï¼š
	â€¢	åŸå§‹å“åº”ï¼šasr/google_response.json
	â€¢	æå– word-levelï¼šasr/zh_words.json
	â€¢	èšåˆå¥çº§ segmentsï¼šasr/zh_segments.json

å¥çº§ segments è§„èŒƒï¼ˆç¡®å®š schemaï¼‰

zh_segments.jsonï¼ˆæ•°ç»„ï¼‰æ¯æ¡ï¼š
	â€¢	id: int
	â€¢	start: float (seconds)
	â€¢	end: float
	â€¢	speaker: stringï¼ˆspeaker_0/1/2â€¦ï¼‰
	â€¢	text: stringï¼ˆä¸­æ–‡ï¼‰

èšåˆè§„åˆ™ï¼ˆç¡®å®šï¼‰

ä» word-levelï¼ˆå« speaker tagï¼‰èšåˆä¸ºå¥çº§æ®µè½ï¼š
	â€¢	åŒ speaker è¿ç»­è¯åˆå¹¶
	â€¢	é‡åˆ°åœé¡¿ï¼ˆ>0.6sï¼‰æ–­å¥
	â€¢	é‡åˆ°æ ‡ç‚¹ï¼ˆã€‚ï¼ï¼Ÿï¼‰æ–­å¥
	â€¢	æœ€å¤§æ®µé•¿ 6sï¼ˆè¶…è¿‡æ‹†åˆ†ï¼‰
	â€¢	æœ€çŸ­æ®µé•¿ 0.6sï¼ˆè¿‡çŸ­åˆå¹¶åˆ°é‚»è¿‘åŒ speakerï¼‰

è¿™æ ·èƒ½æ˜¾è‘—æ”¹å–„åç»­å­—å¹•å¯è¯»æ€§ä¸ TTS å¯¹é½ã€‚

é™çº§ç­–ç•¥ï¼ˆç¡®å®šï¼‰
	â€¢	å¦‚æœ diarization è¾“å‡º speaker å…¨æ˜¯ä¸€ä¸ªï¼š
	â€¢	æ ‡è®° qc.diarization.single_speaker = true
	â€¢	v1 ä»ç»§ç»­ï¼šå…¨éƒ¨ speaker_0ï¼ˆæˆç‰‡è‡³å°‘èƒ½å‡ºï¼‰
	â€¢	å¦‚æœå‡ºç°é‡å /å†²çªï¼ˆåŒæ—¶é—´å¤š speakerï¼‰ï¼š
	â€¢	v1 é‡‡ç”¨â€œä»¥ä¸» speaker ä¸ºå‡†â€çš„ç®€å•ç­–ç•¥ï¼Œå¹¶åœ¨ QC æŠ¥å‘Šæ ‡çº¢

â¸»

4.4 SubtitleBuildï¼ˆä¸­æ–‡ SRTï¼‰

èŒè´£ï¼šæŠŠ zh_segments è¾“å‡ºä¸ºå¯å®¡æ ¡çš„ zh.srt
è¾“å‡ºï¼šsubtitles/zh.srt

è§„åˆ™ï¼ˆç¡®å®šï¼‰ï¼š
	â€¢	å•æ¡å­—å¹•æœ€å¤š 2 è¡Œï¼ˆå¯é€‰ï¼‰
	â€¢	ä¸­æ–‡æ— éœ€ä¸¥æ ¼ CPSï¼Œä½†è¦é¿å… 0.3s é—ªçƒå­—å¹•ï¼ˆåˆå¹¶çŸ­æ®µï¼‰

â¸»

4.5 Translationï¼ˆåœ¨çº¿ï¼šOpenAIï¼Œä¸¤é˜¶æ®µï¼‰

ä½ è¦â€œæ•ˆæœæœ€ç¨³â€ï¼Œç¿»è¯‘å¿…é¡»åšâ€œä¸¤é˜¶æ®µâ€ã€‚

Stage 1ï¼šEpisode Contextï¼ˆç¡®å®šï¼‰

è¾“å…¥ï¼šæ•´é›† zh.srtï¼ˆæˆ– zh_segments æ‹¼æ¥æ–‡æœ¬ï¼‰
è¾“å‡ºï¼štranslate/translation_context.json

å†…å®¹ï¼ˆç¡®å®šå­—æ®µï¼‰ï¼š
	â€¢	charactersï¼šäººç‰©åã€ç§°è°“è§„åˆ™ï¼ˆå“¥/å§/è€æ¿/è€å…¬â€¦æ€ä¹ˆç¿»ï¼‰
	â€¢	glossaryï¼šä¸“æœ‰åè¯ï¼ˆå…¬å¸ã€åœ°åã€ç‰©å“ã€æ¢—ï¼‰
	â€¢	styleï¼šå£è¯­åŒ–ç¨‹åº¦ã€å¹³å°è°ƒæ€§ï¼ˆTikTok/YouTubeï¼‰
	â€¢	constraintsï¼š
	â€¢	max_chars_per_lineï¼ˆè‹±æ–‡å»ºè®® 42ï¼‰
	â€¢	max_linesï¼ˆ2ï¼‰
	â€¢	target_cpsï¼ˆä¾‹å¦‚ 12â€“17ï¼‰
	â€¢	avoid_formalï¼ˆé¿å…ä¹¦é¢è…”ï¼‰
	â€¢	profanity_policyï¼šè„è¯ç­–ç•¥ï¼ˆæ›¿æ¢/å¼±åŒ–/ç›´è¯‘ï¼‰

Stage 2ï¼šSegment Translationï¼ˆç¡®å®šï¼‰

è¾“å…¥ï¼šzh_segments.json + translation_context.json
è¾“å‡ºï¼štranslate/en_segments.json

en_segments æ¯æ¡ä¿ç•™ï¼š
	â€¢	id/start/end/speaker åŸæ ·ç»§æ‰¿
	â€¢	en_text: è‹±æ–‡å­—å¹•å†…å®¹ï¼ˆå·²å—æ§é•¿åº¦ï¼‰

å¼ºçº¦æŸï¼ˆç¡®å®šï¼‰ï¼š
	â€¢	è¾“å‡ºå¿…é¡»å¯æ”¾å…¥ max_lines ä¸”æ¯è¡Œä¸è¶…è¿‡ max_chars_per_line
	â€¢	è¶… CPS éœ€â€œçŸ­å†™â€ï¼ˆä¿è¯­ä¹‰åˆ å†—ä½™ï¼‰
	â€¢	glossary å¼ºåˆ¶ä¸€è‡´ï¼šäººç‰©åã€ä¸“åä¸å…è®¸æ¼‚ç§»

é™çº§ç­–ç•¥ï¼ˆç¡®å®šï¼‰
	â€¢	å¦‚æœæŸæ¡ç¿»è¯‘å¤±è´¥/è¶…é•¿æ— æ³•å‹ç¼©ï¼š
	â€¢	fallbackï¼šç”¨æ›´ä¿å®ˆæ¨¡å¼é‡ç¿»è¯¥å¥ï¼ˆæ›´çŸ­ã€æ›´ç›´è¯‘ï¼‰
	â€¢	ä»å¤±è´¥ï¼šä¸´æ—¶ä½¿ç”¨ç®€åŒ–ç¿»è¯‘ï¼ˆæœ€çŸ­ç‰ˆï¼‰å¹¶åœ¨ QC æ ‡çº¢

â¸»

4.6 SubtitleBuildï¼ˆè‹±æ–‡ SRT + ASS å®‰å…¨åŒºï¼‰

è¾“å‡ºï¼š
	â€¢	subtitles/en.srt
	â€¢	subtitles/en.ass

ASS ç›®æ ‡ï¼ˆç¡®å®šï¼‰
	â€¢	å®‰å…¨åŒºï¼šå­—å¹•æ°¸è¿œåœ¨ä½ èƒ½æ§åˆ¶çš„ä½ç½®ï¼ˆé¿å…å‹ä½ç”»é¢å…³é”®åŒºåŸŸï¼‰
	â€¢	æ ·å¼å›ºå®šï¼šå­—ä½“ã€å¤§å°ã€è¾¹æ¡†ã€é˜´å½±ï¼ˆä½ å¯ later åšä¸»é¢˜ï¼‰

ASS æ¨èç­–ç•¥ï¼ˆç¡®å®šï¼‰
	â€¢	PlayResX/PlayResY å›ºå®šï¼ˆä¾‹å¦‚ 1080x1920 æˆ–åŸºäºæºè§†é¢‘ï¼‰
	â€¢	MarginV è®¾å®šå­—å¹•ç¦»åº•éƒ¨è·ç¦»ï¼ˆé˜²æ­¢æ’åˆ°åŸä¸­æ–‡å­—å¹•åŒºåŸŸ/äººç‰©ï¼‰
	â€¢	å¦‚æœå­˜åœ¨åŸè§†é¢‘åº•éƒ¨ç¡¬å­—å¹•ï¼šå¯ä»¥æŠŠè‹±æ–‡å­—å¹•æŠ¬é«˜åˆ°å®‰å…¨åŒºï¼ˆä¾‹å¦‚ 15% é«˜åº¦å¤„ï¼‰

â¸»

5. å¤šè§’è‰²å£°çº¿æ± ï¼ˆVoice Poolï¼‰ä¸å†»ç»“æ˜ å°„ï¼ˆAssignmentï¼‰

5.1 voice_pool.jsonï¼ˆç³»ç»Ÿçº§ï¼Œç¡®å®šç»“æ„ï¼‰

ä½ é¢„å…ˆå®šä¹‰ 8 æ¡å£°çº¿ï¼ˆå¯ä» Azure å®˜æ–¹ voice list é€‰å®šï¼‰ï¼š
	â€¢	adult_male_1/2/3
	â€¢	adult_female_1/2/3
	â€¢	neutral_1
	â€¢	teen_1ï¼ˆå¯é€‰ï¼‰

æ¯æ¡ voice é…ç½®åŒ…å«ï¼š
	â€¢	voice_idï¼ˆAzure voice nameï¼‰
	â€¢	gender
	â€¢	style_tagsï¼ˆcalm/strong/softï¼‰
	â€¢	prosody_presetï¼ˆrate/pitch/volume é»˜è®¤å€¼ï¼‰

v1 å…ˆå›ºå®šè¿™ 8 æ¡ï¼Œåç»­å†æ‰©å……ã€‚

5.2 voice_assignment.jsonï¼ˆè§†é¢‘çº§ï¼Œç¡®å®šç”Ÿæˆè§„åˆ™ï¼‰

è¾“å…¥ï¼šzh_segmentsï¼ˆspeakerã€æ—¶é•¿ã€æ–‡æœ¬ï¼‰
è¾“å‡ºï¼šspeaker â†’ voice_idï¼ˆå†»ç»“ï¼Œä¸å…è®¸æ¼‚ç§»ï¼‰

Speaker å±æ€§ç²—åˆ¤ï¼ˆç¡®å®šç­–ç•¥ï¼‰
	â€¢	ä½¿ç”¨ vocals.wav + speaker æ—¶é—´æ®µæå–è¯¥ speaker çš„éŸ³é¢‘ç‰‡æ®µ
	â€¢	è®¡ç®— pitch ä¸­ä½æ•°ï¼ˆç²—åˆ¤ç”·/å¥³ï¼Œé˜ˆå€¼å¯è°ƒï¼‰
	â€¢	ç»Ÿè®¡æ¯ä¸ª speaker â€œæ€»å‘è¨€æ—¶é•¿â€ä½œä¸ºé‡è¦æ€§

åˆ†é…ç®—æ³•ï¼ˆç¡®å®šï¼‰
	1.	speakers æŒ‰æ€»å‘è¨€æ—¶é•¿æ’åºï¼ˆä¸»è§’ä¼˜å…ˆï¼‰
	2.	å¯¹ top-3ï¼š
	â€¢	å¦‚æœåˆ¤ maleï¼šä¾æ¬¡åˆ†é… adult_male_1/2/3
	â€¢	åˆ¤ femaleï¼šä¾æ¬¡åˆ†é… adult_female_1/2/3
	â€¢	unknownï¼šç”¨ neutral_1
	3.	å…¶ä½™ speakersï¼šç»Ÿä¸€ neutral_1ï¼ˆå…œåº•ç¨³å®šï¼‰

è¿™å°±æ˜¯â€œVozo é»˜è®¤ä½“éªŒâ€çš„æ ¸å¿ƒï¼šä¸»è¦è§’è‰²åŒºåˆ†æ˜æ˜¾ï¼Œè¾¹ç¼˜è§’è‰²ä¸å†’é™©ã€‚

â¸»

6. TTS åˆæˆï¼ˆåœ¨çº¿ï¼šAzure Neural TTSï¼‰

6.1 åˆæˆç²’åº¦ï¼ˆç¡®å®šï¼‰
	â€¢	é€æ¡å­—å¹•åˆæˆï¼ˆen_segments æ¯æ¡ä¸€ä¸ª wavï¼‰ï¼Œç„¶åæ‹¼æ¥
	â€¢	é€æ¡å¥½å¤„ï¼šå¯é‡è·‘ã€å¯å¯¹é½ã€å¯æ›¿æ¢å•æ¡

6.2 ç”Ÿæˆå‚æ•°ï¼ˆç¡®å®šï¼‰
	â€¢	ä½¿ç”¨ voice_assignment å¯¹åº”çš„ voice
	â€¢	prosodyï¼šrate/pitch é»˜è®¤ preset
	â€¢	è¾“å‡ºæ ¼å¼ï¼šwav / pcm æˆ– mp3ï¼ˆå»ºè®® wav æ–¹ä¾¿æ··éŸ³ï¼‰

6.3 éŸ³é‡é—®é¢˜ï¼ˆä½ ä¹‹å‰æè¿‡â€œå£°éŸ³ç‰¹åˆ«å°â€ï¼‰

v1 æ–¹æ¡ˆç›´æ¥å†…å»ºï¼š
	â€¢	æ¯æ¡ TTS è¾“å‡ºåšä¸€æ¬¡ RMS/peak å½’ä¸€åŒ–ï¼ˆç›®æ ‡ -16~-20 LUFS ä¹‹é—´çš„å¯¹ç™½å“åº¦åŒºé—´ï¼‰
	â€¢	åˆæˆæ€»éŸ³è½¨åå†ç»Ÿä¸€ loudnorm

â¸»

7. æ—¶é•¿å¯¹é½ï¼ˆDuration Alignmentï¼‰

ç›®æ ‡ï¼šTTS ä¸æŠ¢å°è¯ã€ä¸æ‹–æ²“ï¼Œè´´å­—å¹•æ—¶é—´è½´ã€‚

ç¡®å®šç­–ç•¥ï¼š
	1.	å…ˆæµ‹ tts_dur
	2.	ç›®æ ‡æ—¶é•¿ target = end-start
	3.	è‹¥ tts_dur <= targetï¼šè¡¥é™éŸ³å¡«æ»¡ï¼ˆé˜²æ­¢æå‰è¯´å®Œï¼‰
	4.	è‹¥ tts_dur > targetï¼š
	â€¢	å…ˆæé«˜è¯­é€Ÿï¼ˆä¸Šé™ 1.20ï¼Œæé™ 1.25ï¼‰
	â€¢	ä»è¶…æ—¶ â†’ è§¦å‘â€œçŸ­å†™é‡è¯‘è¯¥å¥â€ï¼ˆåªé‡è¯‘è¿™ä¸€å¥ï¼‰ï¼Œå†é‡æ–° TTS

è¿™ä¸€æ­¥æ˜¯â€œæ•ˆæœç¨³â€çš„å…³é”®ï¼Œé¿å…â€œé…éŸ³å‘˜å¿µç¨¿æ‹–æ‹–æ‹‰æ‹‰â€ã€‚

â¸»

8. æ··éŸ³ä¸è¾“å‡ºï¼ˆffmpegï¼Œæœ¬åœ°ï¼‰

8.1 èƒŒæ™¯è½¨é€‰æ‹©ï¼ˆç¡®å®šï¼‰
	â€¢	èƒŒæ™¯ä½¿ç”¨ï¼šaccompaniment.wav
	â€¢	ä¸ç”¨åŸè§†é¢‘éŸ³è½¨çš„åŸå› ï¼šåŸéŸ³è½¨é‡Œä¸­æ–‡å¯¹ç™½å¾ˆéš¾å®Œå…¨å‹æ‰ï¼Œä¼šé€ æˆâ€œä¸­è‹±é‡å â€

8.2 Duckingï¼ˆç¡®å®šï¼‰
	â€¢	è‹±æ–‡å¯¹ç™½å‡ºç°æ—¶ï¼ŒèƒŒæ™¯è‡ªåŠ¨å‹ä½ï¼ˆsidechainï¼‰
	â€¢	å‚æ•°ç”¨ä¿å®ˆé»˜è®¤ï¼ˆé¿å…èƒŒæ™¯æ³µæ„Ÿå¤ªé‡ï¼‰

8.3 Loudnessï¼ˆç¡®å®šï¼‰
	â€¢	æˆç‰‡ç›®æ ‡ï¼š-16 LUFSï¼ˆçŸ­è§†é¢‘å¸¸ç”¨ï¼‰
	â€¢	True Peakï¼š-1.5 dB

è¾“å‡ºï¼š
	â€¢	output/out.mp4ï¼ˆè§†é¢‘å°½é‡ copyï¼ŒéŸ³é¢‘ AACï¼‰

â¸»

9. QCï¼ˆè´¨é‡æŠ¥å‘Šï¼‰ä¸å¤±è´¥é™çº§ï¼ˆç¡®å®šï¼‰

qc_report.jsonï¼ˆç¡®å®šå­—æ®µç¤ºä¾‹ï¼‰
	â€¢	asrï¼š
	â€¢	low_confidence_segmentsï¼ˆid åˆ—è¡¨ï¼‰
	â€¢	garbage_text_ratio
	â€¢	diarizationï¼š
	â€¢	num_speakers
	â€¢	single_speakerï¼ˆboolï¼‰
	â€¢	overlap_detectedï¼ˆboolï¼‰
	â€¢	translationï¼š
	â€¢	glossary_conflictsï¼ˆäººåæ¼‚ç§»ï¼‰
	â€¢	length_violationsï¼ˆè¶…è¡Œ/è¶… CPSï¼‰
	â€¢	ttsï¼š
	â€¢	duration_overflow_segments
	â€¢	volume_outliers
	â€¢	mixï¼š
	â€¢	lufs
	â€¢	true_peak
	â€¢	actions_takenï¼š
	â€¢	retranslated_segments
	â€¢	retss_segments

é™çº§ç­–ç•¥ï¼ˆç¡®å®šï¼‰
	â€¢	diarization å¤±è´¥ï¼šå…¨éƒ¨ speaker_0 â†’ neutral_1ï¼ˆè‡³å°‘èƒ½å‡ºç‰‡ï¼‰
	â€¢	ç¿»è¯‘å¤±è´¥ï¼šä¿å®ˆçŸ­ç¿»è¯‘ï¼ˆç›´è¯‘ã€çŸ­å¥ï¼‰ä¿è¯å¯ç”¨
	â€¢	TTS è¶…æ—¶ï¼šå¼ºåˆ¶é‡è¯‘çŸ­å†™
	â€¢	æ··éŸ³å¼‚å¸¸ï¼šå›é€€åˆ°â€œæ›´å¼ºå‹èƒŒæ™¯â€å‚æ•°

â¸»

10. æˆæœ¬ä¸æ€§èƒ½ï¼ˆå¯é¢„æœŸï¼‰
	â€¢	æœ¬åœ°è€—æ—¶ï¼šä¸»è¦åœ¨ Demucsï¼ˆ2min éŸ³é¢‘é€šå¸¸ 3â€“10 åˆ†é’Ÿ CPU åŒºé—´ï¼›MPS/GPU æ›´å¿«ï¼‰
	â€¢	åœ¨çº¿è€—æ—¶ï¼š
	â€¢	Google STTï¼šé€šå¸¸æ¥è¿‘å®æ—¶æˆ–æ•°å€å®æ—¶ï¼ˆçœ‹æ¥å£ä¸å¹¶å‘ï¼‰
	â€¢	ç¿»è¯‘ï¼šå–å†³äºå­—å¹•æ¡æ•°ï¼ˆçŸ­å‰§ 2 åˆ†é’Ÿé€šå¸¸å‡ åæ¡ï¼‰
	â€¢	Azure TTSï¼šé€æ¡åˆæˆå¹¶å‘å¯æ§

v1 çš„ååç“¶é¢ˆåœ¨ Demucsï¼›åç»­å¯é€šè¿‡å¹¶è¡Œ/ç¼“å­˜/æŒ‰é›†æ‰¹å¤„ç†ä¼˜åŒ–ã€‚

â¸»

11. v1.1 æ¼”è¿›ï¼ˆå¯é€‰ï¼Œä½†ä¸å½±å“ v1 è½åœ°ï¼‰

å½“ä½  v1 è·‘é€šåï¼Œæœ€å€¼çš„å¢å¼ºé¡ºåºï¼š
	1.	æ›´å¼ºçš„ speaker å±æ€§åˆ¤åˆ«ï¼ˆå‡å°‘ç”·å¥³è¯¯åˆ¤ï¼‰
	2.	å¯¹è¯é‡å æ®µå¤„ç†ï¼ˆunknown ç”¨ neutral æˆ–æ—ç™½ï¼‰
	3.	ç¿»è¯‘ä¸€è‡´æ€§æ›´å¼ºçš„â€œæœ¯è¯­è‡ªåŠ¨æŠ½å–â€ï¼ˆä»å­—å¹•/ASR è‡ªåŠ¨æ„å»º glossaryï¼‰
	4.	å­—å¹•ä½ç½®è‡ªé€‚åº”ï¼ˆæ£€æµ‹ç”»é¢ä¸‹æ–¹ç¡¬å­—å¹•åŒºåŸŸï¼Œè‡ªåŠ¨æŠ¬å­—å¹•ï¼‰

â¸»

12. ä½ ç°æœ‰å·¥ç¨‹å¦‚ä½•è½ä½ï¼ˆç¡®å®šæ”¹é€ ç‚¹ï¼‰

ä½ ç°åœ¨å·¥ç¨‹å·²ç»æœ‰ï¼š
	â€¢	ffmpeg æŠ½éŸ³
	â€¢	whisper æœ¬åœ° ASRï¼ˆå°†è¢« v1 æ›¿æ¢ä¸º Google STTï¼‰
	â€¢	voice profile managerï¼ˆä½ å·²æœ‰é›å½¢ï¼‰

v1 æ”¹é€ è½ä½å»ºè®®ï¼ˆç¡®å®šï¼‰ï¼š
	â€¢	pipeline/separate_audio_demucs.pyï¼šDemucs åˆ†ç¦»æ¨¡å—ï¼ˆlocalï¼‰
	â€¢	pipeline/asr_google.pyï¼šGoogle STT + diarizationï¼ˆonlineï¼‰
	â€¢	pipeline/translate_openai.pyï¼šä¸¤é˜¶æ®µç¿»è¯‘ï¼ˆonlineï¼‰
	â€¢	models/voice_pool.pyï¼šç³»ç»Ÿçº§å£°çº¿æ± é…ç½®
	â€¢	pipeline/assign_voices.pyï¼šspeakerâ†’voice assignmentï¼ˆå†»ç»“ï¼‰
	â€¢	pipeline/tts_azure.pyï¼šé€æ¡åˆæˆ + æ‹¼æ¥
	â€¢	pipeline/mix_ffmpeg.pyï¼šaccompaniment + tts + ducking + loudnorm
	â€¢	cli.py å¢åŠ  vsd dub-en <video> ä¸€é”®å‘½ä»¤

-------------------
å¥½ï¼Œä¸‹é¢ç»™ä½ ä¸€å¥—å¯ç›´æ¥è½åœ°çš„ Azure Neural TTSã€Œç¾å¼è‹±è¯­å£°çº¿æ± ï¼ˆ8 æ¡ï¼‰ã€ï¼Œ**ä¸“é—¨ä¸ºçŸ­å‰§ / ç«–å±ï¼ˆ9:16ï¼‰**è®¾è®¡ï¼Œç›®æ ‡å°±æ˜¯ä½ å‰é¢å®šçš„ï¼š

åƒ Vozo é»˜è®¤ï¼šè‡ªç„¶ã€ç¨³å®šã€é…éŸ³å‘˜çº§ï¼Œä¸è¿½æ±‚åŸæ¼”å‘˜å…‹éš†

æˆ‘ä¼šç»™ä½ ï¼š
	â€¢	âœ… 8 æ¡ç¡®å®šå£°çº¿ï¼ˆå…·ä½“ voice nameï¼‰
	â€¢	âœ… æ¯æ¡çš„è§’è‰²å®šä½
	â€¢	âœ… ä¸ºä»€ä¹ˆé€‰å®ƒï¼ˆé¿å…è¸©å‘ï¼‰
	â€¢	âœ… å¯ç›´æ¥å†™å…¥ voice_pool.json çš„ç»“æ„ç¤ºä¾‹

â¸»

ä¸€ã€è®¾è®¡åŸåˆ™ï¼ˆä¸ºä»€ä¹ˆè¿™ 8 æ¡å¤Ÿç”¨ï¼‰

çŸ­å‰§ + ç«–å±çš„æ ¸å¿ƒè¯‰æ±‚
	â€¢	æ‰‹æœºå¤–æ”¾ä¹Ÿæ¸…æ¥š
	â€¢	æƒ…ç»ªèƒ½æ‹‰å¼€ï¼Œä½†ä¸è¿‡ç«
	â€¢	ç”·å¥³å·®å¼‚æ˜æ˜¾
	â€¢	åŒä¸€è§’è‰²ä¸æ¼‚
	â€¢	ä¸æ˜¾â€œå®¢æœ / æ•™å­¦ / æ–°é—»è…”â€

å£°çº¿æ± ç­–ç•¥
	â€¢	ä¸è¿½æ±‚å¤šï¼ˆå¤šåè€Œå¢åŠ é”™è¯¯ç‡ï¼‰
	â€¢	æ¯ä¸€æ¡éƒ½â€œèƒ½æ‰“â€
	â€¢	è¦†ç›–è§’è‰²ç±»å‹ï¼Œè€Œä¸æ˜¯éŸ³è‰²èŠ±æ ·

â¸»

äºŒã€Azure ç¾å¼è‹±è¯­å£°çº¿æ± ï¼ˆ8 æ¡ Â· ç¡®å®šæ¨èï¼‰

è¯­è¨€ç»Ÿä¸€ï¼šen-US
é£æ ¼ç»Ÿä¸€ï¼šConversation / General
ç”¨é€”ï¼šçŸ­å‰§å¯¹ç™½ / æƒ…ç»ªå¯¹è¯

â¸»

ğŸ§‘ ç”·å£°ï¼ˆ4 æ¡ï¼‰

1ï¸âƒ£ en-US-GuyNeural

å®šä½ï¼šä¸»è§’ç”· / æˆç†Ÿç¨³é‡ / éœ¸æ€» / ç”·ä¸€
ç‰¹ç‚¹
	â€¢	ä½é¢‘æ‰å®
	â€¢	æƒ…ç»ªæ§åˆ¶å¥½
	â€¢	ä¸æ²¹ã€ä¸æ’­éŸ³

âœ… çŸ­å‰§ç”·ä¸»é¦–é€‰

â¸»

2ï¸âƒ£ en-US-DavisNeural

å®šä½ï¼šç”·äºŒ / å†·é™ç†æ€§ / èŒåœº / åæ´¾
ç‰¹ç‚¹
	â€¢	åå†·è‰²
	â€¢	è¯­æ°”å…‹åˆ¶
	â€¢	å¾ˆé€‚åˆå¯¹è¯å¼ åŠ›

â¸»

3ï¸âƒ£ en-US-JasonNeural

å®šä½ï¼šå¹´è½»ç”·æ€§ / æƒ…ç»ªèµ·ä¼ / å†²åŠ¨è§’è‰²
ç‰¹ç‚¹
	â€¢	å¹´è½»æ„Ÿå¼º
	â€¢	æƒ…ç»ªååº”å¿«
	â€¢	ä¸æ˜¾è€

â¸»

4ï¸âƒ£ en-US-TonyNeural

å®šä½ï¼šé…è§’ç”· / æ™®é€šæˆå¹´ç”·æ€§
ç‰¹ç‚¹
	â€¢	ä¸­æ€§å®‰å…¨
	â€¢	å‡ ä¹ä¸ç¿»è½¦
	â€¢	ç”¨æ¥å…œåº•éå¸¸ç¨³

â¸»

ğŸ‘© å¥³å£°ï¼ˆ4 æ¡ï¼‰

5ï¸âƒ£ en-US-JennyNeural

å®šä½ï¼šå¥³ä¸» / æƒ…æ„Ÿæˆ / å¼ºæƒ…ç»ª
ç‰¹ç‚¹
	â€¢	è¡¨è¾¾åŠ›å¼º
	â€¢	ä¸å°–
	â€¢	å¾ˆé€‚åˆæƒ…ä¾£/å®¶åº­æˆ

âœ… çŸ­å‰§å¥³ä¸»é¦–é€‰

â¸»

6ï¸âƒ£ en-US-AriaNeural

å®šä½ï¼šçŸ¥æ€§å¥³æ€§ / èŒåœº / æˆç†Ÿå¥³æ€§
ç‰¹ç‚¹
	â€¢	ç¨³é‡
	â€¢	æ¸…æ™°
	â€¢	å¾ˆâ€œé«˜çº§æ„Ÿâ€

â¸»

7ï¸âƒ£ en-US-AmberNeural

å®šä½ï¼šå¹´è½»å¥³æ€§ / æ´»æ³¼ / é—ºèœœ
ç‰¹ç‚¹
	â€¢	å¹´è½»
	â€¢	æ˜äº®
	â€¢	ä¸å¹¼ç¨š

â¸»

8ï¸âƒ£ en-US-AnaNeural

å®šä½ï¼šä¸­æ€§å¥³å£° / æ—ç™½ / å…œåº•
ç‰¹ç‚¹
	â€¢	éå¸¸ç¨³
	â€¢	æ¸…æ™°åº¦é«˜
	â€¢	é€‚åˆå¤šåœºæ™¯å¤ç”¨

â¸»

ä¸‰ã€æ¨èçš„é»˜è®¤è§’è‰²æ˜ å°„ç­–ç•¥ï¼ˆç«–å±çŸ­å‰§ï¼‰

v1 å»ºè®®çš„è‡ªåŠ¨åˆ†é…é¡ºåº

ç”·æ€§
	1.	ä¸»è§’ â†’ GuyNeural
	2.	æ¬¡è¦/åæ´¾ â†’ DavisNeural
	3.	å¹´è½»è§’è‰² â†’ JasonNeural
	4.	å…¶ä½™ â†’ TonyNeural

å¥³æ€§
	1.	å¥³ä¸» â†’ JennyNeural
	2.	æˆç†Ÿå¥³æ€§ â†’ AriaNeural
	3.	å¹´è½»å¥³æ€§ â†’ AmberNeural
	4.	å…¶ä½™ â†’ AnaNeural

è¿™ä¸ªé¡ºåºéå¸¸æ¥è¿‘ Vozo çš„é»˜è®¤è¡Œä¸ºï¼š
ä¸»è§’æ‹‰å¼€å·®å¼‚ï¼Œé…è§’ç¨³ä½ä¸ç¿»è½¦ã€‚

â¸»

å››ã€voice_pool.json ç¤ºä¾‹ï¼ˆå¯ç›´æ¥ç”¨ï¼‰

{
  "language": "en-US",
  "aspect_ratio": "9:16",
  "voices": {
    "adult_male_1": {
      "voice_id": "en-US-GuyNeural",
      "gender": "male",
      "role": "male_lead",
      "prosody": { "rate": 1.0, "pitch": 0, "volume": 0 }
    },
    "adult_male_2": {
      "voice_id": "en-US-DavisNeural",
      "gender": "male",
      "role": "male_support",
      "prosody": { "rate": 1.0, "pitch": 0, "volume": 0 }
    },
    "adult_male_3": {
      "voice_id": "en-US-JasonNeural",
      "gender": "male",
      "role": "male_young",
      "prosody": { "rate": 1.05, "pitch": 1, "volume": 0 }
    },
    "adult_male_4": {
      "voice_id": "en-US-TonyNeural",
      "gender": "male",
      "role": "male_generic",
      "prosody": { "rate": 1.0, "pitch": 0, "volume": 0 }
    },
    "adult_female_1": {
      "voice_id": "en-US-JennyNeural",
      "gender": "female",
      "role": "female_lead",
      "prosody": { "rate": 1.0, "pitch": 0, "volume": 0 }
    },
    "adult_female_2": {
      "voice_id": "en-US-AriaNeural",
      "gender": "female",
      "role": "female_mature",
      "prosody": { "rate": 0.98, "pitch": 0, "volume": 0 }
    },
    "adult_female_3": {
      "voice_id": "en-US-AmberNeural",
      "gender": "female",
      "role": "female_young",
      "prosody": { "rate": 1.05, "pitch": 1, "volume": 0 }
    },
    "adult_female_4": {
      "voice_id": "en-US-AnaNeural",
      "gender": "female",
      "role": "female_generic",
      "prosody": { "rate": 1.0, "pitch": 0, "volume": 0 }
    }
  }
}


â¸»

äº”ã€ä¸ºä»€ä¹ˆè¿™å¥—ç‰¹åˆ«é€‚åˆç«–å±çŸ­å‰§
	â€¢	æ‰‹æœºå¤–æ”¾æ¸…æ™°åº¦é«˜
	â€¢	æƒ…ç»ªè¡¨è¾¾â€œåˆšåˆšå¥½â€ï¼Œä¸ç‚¸
	â€¢	ä¸æ˜¾ AIã€ä¸å¡å£
	â€¢	å¤šè§’è‰²åˆ‡æ¢æ—¶è§‚æ„Ÿç¨³å®š
	â€¢	å³ä½¿å­—å¹•+é…éŸ³å¯†é›†ï¼Œä¹Ÿä¸ä¼šç–²åŠ³

â¸»

ä¸‹ä¸€æ­¥æˆ‘å¯ä»¥ç›´æ¥å¸®ä½ åšçš„ä¸¤ä»¶äº‹ï¼ˆä»»é€‰ï¼‰

1ï¸âƒ£ ç»™ä½ ä¸€å¥—ã€Œspeaker â†’ voice è‡ªåŠ¨åˆ†é…è§„åˆ™è¡¨ã€
ï¼ˆåŸºäºæ—¶é•¿ã€æ€§åˆ«ã€é‡è¦æ€§ï¼Œç›´æ¥è¾“å‡º voice_assignment.jsonï¼‰

ä¸‹é¢ç»™ä½ ä¸€å¥—ç¡®å®šæ€§çš„â€œspeaker â†’ voice è‡ªåŠ¨åˆ†é…è§„åˆ™â€ï¼Œç›®æ ‡æ˜¯ï¼š
	â€¢	åŒä¸€ speaker æ°¸è¿œåŒä¸€å£°çº¿ï¼ˆæ•´é›†å†»ç»“ï¼‰
	â€¢	ä¼˜å…ˆåŒºåˆ†ä¸»è¦è§’è‰²ï¼ˆæŒ‰å°è¯æ—¶é•¿/é‡è¦æ€§ï¼‰
	â€¢	æ€§åˆ«èƒ½åŒºåˆ†å°±åŒºåˆ†ï¼ˆç²—åˆ¤å³å¯ï¼Œé”™äº†ä¹Ÿæœ‰å…œåº•ï¼‰
	â€¢	è§’è‰²å¤ªå¤šä¸å†’é™©ï¼ˆVozo é»˜è®¤ç­–ç•¥ï¼šåªä¿è¯å‰ 2â€“4 ä¸ªä¸»è¦è§’è‰²å·®å¼‚ï¼Œå…¶ä½™ç”¨ generic/neutralï¼‰

æˆ‘ä¼šç»™ä½ ï¼š
	1.	è§„åˆ™ï¼ˆç¡®å®šã€å¯ç›´æ¥å®ç°ï¼‰
	2.	éœ€è¦çš„è¾“å…¥æ•°æ®ï¼ˆä½ ç°æœ‰ pipeline éƒ½èƒ½ç®—å‡ºæ¥ï¼‰
	3.	voice_assignment.json çš„ schema
	4.	ç¤ºä¾‹è¾“å‡º

â¸»

1) è¾“å…¥æ•°æ®ï¼ˆä½ éœ€è¦æä¾›/è®¡ç®—ï¼‰

æ¥è‡ª zh_segments.jsonï¼ˆGoogle STT èšåˆåï¼‰ï¼š

æ¯æ¡ segmentï¼š
	â€¢	speaker: â€œspeaker_0â€
	â€¢	start, end
	â€¢	text

ä½ è¿˜éœ€è¦ä» vocals.wav æŒ‰ speaker çš„æ—¶é—´æ®µåˆ‡ç‰‡è®¡ç®—ä¸¤ç±»ç»Ÿè®¡é‡ï¼š

1.1 Speaker Importanceï¼ˆé‡è¦æ€§ï¼‰
	â€¢	total_speech_sec: è¯¥ speaker æ‰€æœ‰ç‰‡æ®µæ—¶é•¿ä¹‹å’Œ
	â€¢	num_segments: ç‰‡æ®µæ•°ï¼ˆå¯ç”¨äºåˆ¤â€œæ˜¯ä¸æ˜¯ä¸»è§’â€ï¼‰

v1 åªç”¨ total_speech_sec å°±å¤Ÿäº†ï¼Œæœ€ç¨³ã€‚

1.2 Gender Heuristicï¼ˆæ€§åˆ«ç²—åˆ¤ï¼‰

å¯¹è¯¥ speaker çš„éŸ³é¢‘åˆ‡ç‰‡ï¼Œæå– pitchï¼ˆåŸºé¢‘ï¼‰ä¸­ä½æ•° f0_medianï¼Œå†åˆ†ç±»ï¼š
	â€¢	maleï¼šf0_median < 165 Hz
	â€¢	femaleï¼šf0_median > 190 Hz
	â€¢	unknownï¼šä»‹äºå…¶é—´æˆ– pitch å–ä¸åˆ°

é˜ˆå€¼æ˜¯â€œå·¥ç¨‹é»˜è®¤â€ã€‚ä½ åç»­å¯ä»¥ç”¨ QC æ•°æ®å†å¾®è°ƒã€‚

â¸»

2) Voice Poolï¼ˆå›ºå®š 8 æ¡ï¼‰

ä½ å·²ç»æœ‰è¿™ 8 æ¡ï¼ˆen-USï¼‰ï¼š

Male
	â€¢	adult_male_1: en-US-GuyNeural
	â€¢	adult_male_2: en-US-DavisNeural
	â€¢	adult_male_3: en-US-JasonNeural
	â€¢	adult_male_4: en-US-TonyNeural

Female
	â€¢	adult_female_1: en-US-JennyNeural
	â€¢	adult_female_2: en-US-AriaNeural
	â€¢	adult_female_3: en-US-AmberNeural
	â€¢	adult_female_4: en-US-AnaNeural

å…¶ä¸­ TonyNeural / AnaNeural å½“ä½œâ€œgeneric/å…œåº•å£°çº¿â€ã€‚

â¸»

3) è‡ªåŠ¨åˆ†é…è§„åˆ™ï¼ˆç¡®å®šï¼‰

3.1 å…ˆæ’åºï¼šæŒ‰é‡è¦æ€§æŒ‘ä¸»è§’
	1.	å¯¹æ‰€æœ‰ speaker ç»Ÿè®¡ total_speech_sec
	2.	æŒ‰ total_speech_sec é™åºæ’åº
	3.	åªå¯¹ top-K åšâ€œå·®å¼‚åŒ–æ˜ å°„â€ï¼Œå…¶ä½™ç»Ÿä¸€å…œåº•

K çš„ç¡®å®šè§„åˆ™ï¼ˆVozo é£æ ¼ã€æœ€ç¨³ï¼‰
	â€¢	K = min(4, number_of_speakers)
	â€¢	ä½†å¦‚æœè§†é¢‘å¾ˆçŸ­/è§’è‰²å¾ˆå¤šï¼Œæ”¹æˆï¼š
	â€¢	å¦‚æœ top1 / total_all >= 0.55ï¼šK=2ï¼ˆåŸºæœ¬å°±æ˜¯åŒäººæˆï¼‰
	â€¢	å¦‚æœ num_speakers > 6ï¼šK=3ï¼ˆé¿å…è¿‡åº¦åˆ†é…å¯¼è‡´é”™é…æ˜¾çœ¼ï¼‰

è¿™ä¸ªç­–ç•¥çš„æœ¬è´¨ï¼šå®å¯å°‘åˆ†é…ã€ä¹Ÿåˆ«ä¹±åˆ†é…ã€‚

â¸»

3.2 æ€§åˆ«åˆ†æ¡¶ + åˆ†é…ä¼˜å…ˆçº§

å¯¹ top-K speakerï¼š
	â€¢	åˆ¤ gender
	â€¢	è¿›å…¥å¯¹åº”æ± 

åˆ†é…é¡ºåºå›ºå®šï¼š

male bucket é¡ºåºï¼š
	1.	GuyNeuralï¼ˆç”·ä¸»ï¼‰
	2.	DavisNeuralï¼ˆç”·äºŒ/åæ´¾ï¼‰
	3.	JasonNeuralï¼ˆå¹´è½»ç”·ï¼‰
	4.	TonyNeuralï¼ˆå…œåº•ç”·ï¼‰

female bucket é¡ºåºï¼š
	1.	JennyNeuralï¼ˆå¥³ä¸»ï¼‰
	2.	AriaNeuralï¼ˆæˆç†Ÿå¥³ï¼‰
	3.	AmberNeuralï¼ˆå¹´è½»å¥³ï¼‰
	4.	AnaNeuralï¼ˆå…œåº•å¥³ï¼‰

â¸»

3.3 å†²çªå¤„ç†ï¼ˆå¿…é¡»è¦æœ‰ï¼Œå¦åˆ™ä¼šç¿»è½¦ï¼‰

è§„åˆ™ Aï¼šæŸä¸€æ€§åˆ«å¤ªå¤šï¼Œæ± ä¸å¤Ÿ
	â€¢	è¶…å‡ºçš„ speaker å…¨éƒ¨ç”¨è¯¥æ€§åˆ«çš„å…œåº•ï¼š
	â€¢	male è¶…å‡º â†’ TonyNeural
	â€¢	female è¶…å‡º â†’ AnaNeural

è§„åˆ™ Bï¼šgender=unknown
	â€¢	å¦‚æœ top-K é‡Œ unknownï¼š
	â€¢	ä¼˜å…ˆç”¨ AnaNeuralï¼ˆæ›´ä¸­æ€§ã€ä¸ä¼šå¤ªè¿å’Œï¼‰
	â€¢	å…¶ä½™é top-K unknownï¼š
	â€¢	ç»Ÿä¸€ AnaNeural

è§„åˆ™ Cï¼šspeaker è¿‡çŸ­ï¼ˆå¾ˆå¯èƒ½æ˜¯è¯¯åˆ†æˆ–è·¯äººï¼‰
	â€¢	å¦‚æœ total_speech_sec < 6s æˆ– num_segments <= 2ï¼š
	â€¢	ç›´æ¥èµ°å…œåº•ï¼ˆä¸è¦ç»™ç‹¬ç«‹å£°çº¿ï¼‰

â¸»

4) è¾“å‡ºï¼švoice_assignment.jsonï¼ˆç¡®å®š schemaï¼‰

{
  "video_id": "episode_001",
  "language": "en-US",
  "generated_at": "2026-01-18T12:00:00+11:00",
  "policy": {
    "top_k_max": 4,
    "min_speech_sec_for_unique_voice": 6,
    "gender_thresholds_hz": { "male_lt": 165, "female_gt": 190 },
    "fallback_male": "en-US-TonyNeural",
    "fallback_female": "en-US-AnaNeural",
    "fallback_unknown": "en-US-AnaNeural"
  },
  "speakers": {
    "speaker_0": {
      "gender": "male",
      "importance": { "total_speech_sec": 58.2, "num_segments": 41, "rank": 1 },
      "voice": { "pool_key": "adult_male_1", "voice_id": "en-US-GuyNeural" }
    },
    "speaker_1": {
      "gender": "female",
      "importance": { "total_speech_sec": 47.4, "num_segments": 36, "rank": 2 },
      "voice": { "pool_key": "adult_female_1", "voice_id": "en-US-JennyNeural" }
    },
    "speaker_2": {
      "gender": "male",
      "importance": { "total_speech_sec": 12.3, "num_segments": 10, "rank": 3 },
      "voice": { "pool_key": "adult_male_2", "voice_id": "en-US-DavisNeural" }
    },
    "speaker_3": {
      "gender": "unknown",
      "importance": { "total_speech_sec": 4.1, "num_segments": 2, "rank": 7 },
      "voice": { "pool_key": "adult_female_4", "voice_id": "en-US-AnaNeural" }
    }
  }
}

æ³¨æ„ï¼šå³ä½¿ speaker_3 rank å¾ˆä½ï¼Œä¹Ÿä¼šæœ‰æ˜ å°„ï¼ˆä½†ç”¨å…œåº•å£°çº¿ï¼‰ï¼Œè¿™æ ·åç»­ TTS ä¸ä¼šå‡ºç°ç©ºæ˜ å°„ã€‚

â¸»

5) ç¤ºä¾‹ï¼šå…¸å‹çŸ­å‰§çš„æ˜ å°„ç»“æœï¼ˆä½ ä¼šçœ‹åˆ°â€œåƒ Vozo é»˜è®¤â€ï¼‰

åœºæ™¯ 1ï¼šåŒäººä¸»æˆï¼ˆç”·å¥³å¯¹è¯ 80%ï¼‰
	â€¢	speaker_0ï¼ˆç”·ï¼‰â†’ Guy
	â€¢	speaker_1ï¼ˆå¥³ï¼‰â†’ Jenny
	â€¢	å…¶ä½™ â†’ Anaï¼ˆæˆ– Tony/Anaï¼‰

åœºæ™¯ 2ï¼šä¸‰è§’å…³ç³»ï¼ˆä¸¤ç”·ä¸€å¥³ï¼‰
	â€¢	ç”·ä¸» â†’ Guy
	â€¢	å¥³ä¸» â†’ Jenny
	â€¢	ç”·äºŒ/åæ´¾ â†’ Davis
	â€¢	å…¶ä½™ â†’ Tony/Ana

åœºæ™¯ 3ï¼šç¾¤åƒæˆä½†ç´ ææ··ä¹±ï¼ˆspeaker å¾ˆå¤šï¼‰
	â€¢	åªç»™ top-3 åˆ†é…ç‹¬ç«‹å£°çº¿ï¼ˆGuy/Jenny/Davisï¼‰
	â€¢	å…¶ä»–å…¨éƒ¨å…œåº•ï¼ˆTony/Anaï¼‰

è¿™èƒ½æ˜¾è‘—é™ä½â€œè¯¯åˆ†é…å¯¼è‡´è§‚æ„Ÿå´©â€çš„æ¦‚ç‡ã€‚


